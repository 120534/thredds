if (name != "thredds") {
    throw new GradleException("This script plugin should only be applied to the root project, not '$name'.")
}

apply plugin: "org.sonarqube"

allprojects {
    sonarqube {
        properties {
            property "sonar.host.url", "https://sonarqube.com"
            // Unidata
            property "sonar.login","62dddbe68f6cd0803ea7c76178bcee93be35bf22"
            // cwardgar
            // property "sonar.login", "49fefac6d9c88b2a7eda6ea7ebb41dbfbd4d5a30"
    
            property "sonar.inclusions", "**/*.java,**/*.groovy"  // We have C code in our repo that trips sonar up.
            
            property "sonar.verbose", "true"
        }
    }
}

tasks.sonarqube {
    println "========== ${it.project.name}:${it.name} =========="
    doFirst {
        properties.each{ k, v -> println "${k}:${v}" }
    }
    println()
    println()
}
